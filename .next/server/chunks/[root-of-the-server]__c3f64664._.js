module.exports = {

"[project]/.next-internal/server/app/api/order/email/route/actions.js [app-rsc] (server actions loader, ecmascript)": ((__turbopack_context__) => {

var { m: module, e: exports } = __turbopack_context__;
{
}}),
"[externals]/next/dist/compiled/next-server/app-route-turbo.runtime.dev.js [external] (next/dist/compiled/next-server/app-route-turbo.runtime.dev.js, cjs)": ((__turbopack_context__) => {

var { m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("next/dist/compiled/next-server/app-route-turbo.runtime.dev.js", () => require("next/dist/compiled/next-server/app-route-turbo.runtime.dev.js"));

module.exports = mod;
}}),
"[externals]/next/dist/compiled/@opentelemetry/api [external] (next/dist/compiled/@opentelemetry/api, cjs)": ((__turbopack_context__) => {

var { m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("next/dist/compiled/@opentelemetry/api", () => require("next/dist/compiled/@opentelemetry/api"));

module.exports = mod;
}}),
"[externals]/next/dist/compiled/next-server/app-page-turbo.runtime.dev.js [external] (next/dist/compiled/next-server/app-page-turbo.runtime.dev.js, cjs)": ((__turbopack_context__) => {

var { m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("next/dist/compiled/next-server/app-page-turbo.runtime.dev.js", () => require("next/dist/compiled/next-server/app-page-turbo.runtime.dev.js"));

module.exports = mod;
}}),
"[externals]/next/dist/server/app-render/work-unit-async-storage.external.js [external] (next/dist/server/app-render/work-unit-async-storage.external.js, cjs)": ((__turbopack_context__) => {

var { m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("next/dist/server/app-render/work-unit-async-storage.external.js", () => require("next/dist/server/app-render/work-unit-async-storage.external.js"));

module.exports = mod;
}}),
"[externals]/next/dist/server/app-render/work-async-storage.external.js [external] (next/dist/server/app-render/work-async-storage.external.js, cjs)": ((__turbopack_context__) => {

var { m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("next/dist/server/app-render/work-async-storage.external.js", () => require("next/dist/server/app-render/work-async-storage.external.js"));

module.exports = mod;
}}),
"[externals]/next/dist/shared/lib/no-fallback-error.external.js [external] (next/dist/shared/lib/no-fallback-error.external.js, cjs)": ((__turbopack_context__) => {

var { m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("next/dist/shared/lib/no-fallback-error.external.js", () => require("next/dist/shared/lib/no-fallback-error.external.js"));

module.exports = mod;
}}),
"[externals]/next/dist/server/app-render/after-task-async-storage.external.js [external] (next/dist/server/app-render/after-task-async-storage.external.js, cjs)": ((__turbopack_context__) => {

var { m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("next/dist/server/app-render/after-task-async-storage.external.js", () => require("next/dist/server/app-render/after-task-async-storage.external.js"));

module.exports = mod;
}}),
"[externals]/events [external] (events, cjs)": ((__turbopack_context__) => {

var { m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("events", () => require("events"));

module.exports = mod;
}}),
"[externals]/url [external] (url, cjs)": ((__turbopack_context__) => {

var { m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("url", () => require("url"));

module.exports = mod;
}}),
"[externals]/util [external] (util, cjs)": ((__turbopack_context__) => {

var { m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("util", () => require("util"));

module.exports = mod;
}}),
"[externals]/fs [external] (fs, cjs)": ((__turbopack_context__) => {

var { m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("fs", () => require("fs"));

module.exports = mod;
}}),
"[externals]/http [external] (http, cjs)": ((__turbopack_context__) => {

var { m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("http", () => require("http"));

module.exports = mod;
}}),
"[externals]/https [external] (https, cjs)": ((__turbopack_context__) => {

var { m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("https", () => require("https"));

module.exports = mod;
}}),
"[externals]/zlib [external] (zlib, cjs)": ((__turbopack_context__) => {

var { m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("zlib", () => require("zlib"));

module.exports = mod;
}}),
"[externals]/stream [external] (stream, cjs)": ((__turbopack_context__) => {

var { m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("stream", () => require("stream"));

module.exports = mod;
}}),
"[externals]/net [external] (net, cjs)": ((__turbopack_context__) => {

var { m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("net", () => require("net"));

module.exports = mod;
}}),
"[externals]/dns [external] (dns, cjs)": ((__turbopack_context__) => {

var { m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("dns", () => require("dns"));

module.exports = mod;
}}),
"[externals]/os [external] (os, cjs)": ((__turbopack_context__) => {

var { m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("os", () => require("os"));

module.exports = mod;
}}),
"[externals]/path [external] (path, cjs)": ((__turbopack_context__) => {

var { m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("path", () => require("path"));

module.exports = mod;
}}),
"[externals]/crypto [external] (crypto, cjs)": ((__turbopack_context__) => {

var { m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("crypto", () => require("crypto"));

module.exports = mod;
}}),
"[externals]/tls [external] (tls, cjs)": ((__turbopack_context__) => {

var { m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("tls", () => require("tls"));

module.exports = mod;
}}),
"[externals]/child_process [external] (child_process, cjs)": ((__turbopack_context__) => {

var { m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("child_process", () => require("child_process"));

module.exports = mod;
}}),
"[project]/src/app/api/order/email/route.ts [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

// app/api/order/route.ts
__turbopack_context__.s({
    "POST": ()=>POST
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$next$40$15$2e$4$2e$6_react$2d$dom$40$19$2e$1$2e$0_react$40$19$2e$1$2e$0_$5f$react$40$19$2e$1$2e$0$2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/.pnpm/next@15.4.6_react-dom@19.1.0_react@19.1.0__react@19.1.0/node_modules/next/server.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$nodemailer$40$7$2e$0$2e$5$2f$node_modules$2f$nodemailer$2f$lib$2f$nodemailer$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/.pnpm/nodemailer@7.0.5/node_modules/nodemailer/lib/nodemailer.js [app-route] (ecmascript)");
;
;
const { SMTP_HOST, SMTP_PORT = "587", SMTP_SECURE = "false", SMTP_USER, SMTP_PASS, ORDER_EMAIL_TO, ORDER_EMAIL_FROM } = process.env;
const PASTA_SLOTS = new Set([
    "17:30",
    "18:30"
]);
const SIZE_SET = new Set([
    "small",
    "medium",
    "large"
]);
const CHEESE_SET = new Set([
    "met",
    "zonder"
]);
async function POST(req) {
    try {
        const { customer, items, total, placedAt } = await req.json();
        // Basisvalidatie (bedrijf blijft optioneel)
        if (!customer?.name || !customer?.phone || !Array.isArray(items) || items.length === 0) {
            return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$next$40$15$2e$4$2e$6_react$2d$dom$40$19$2e$1$2e$0_react$40$19$2e$1$2e$0_$5f$react$40$19$2e$1$2e$0$2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
                error: "Ongeldige payload"
            }, {
                status: 400
            });
        }
        // Validatie voor pasta-items
        for (const it of items){
            const cat = String(it.category || "").toLowerCase();
            if (cat === "pasta" || cat === "pasta_special") {
                if (!it.timeslot || !PASTA_SLOTS.has(it.timeslot)) {
                    return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$next$40$15$2e$4$2e$6_react$2d$dom$40$19$2e$1$2e$0_react$40$19$2e$1$2e$0_$5f$react$40$19$2e$1$2e$0$2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
                        error: "Pasta vereist een geldig tijdslot"
                    }, {
                        status: 400
                    });
                }
                if (!it.size || !SIZE_SET.has(String(it.size).toLowerCase())) {
                    return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$next$40$15$2e$4$2e$6_react$2d$dom$40$19$2e$1$2e$0_react$40$19$2e$1$2e$0_$5f$react$40$19$2e$1$2e$0$2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
                        error: "Pasta vereist een maat: small, medium of large"
                    }, {
                        status: 400
                    });
                }
                // âœ… Kaas verplicht (met/zonder) voor pasta & pasta_special
                const ch = String(it.cheese || "").toLowerCase();
                if (!CHEESE_SET.has(ch)) {
                    return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$next$40$15$2e$4$2e$6_react$2d$dom$40$19$2e$1$2e$0_react$40$19$2e$1$2e$0_$5f$react$40$19$2e$1$2e$0$2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
                        error: "Pasta vereist een keuze voor kaas: met of zonder"
                    }, {
                        status: 400
                    });
                }
            }
            // Sauzen enkel voor gewone pasta (niet specials)
            if (cat === "pasta") {
                const sauces = Array.isArray(it.sauces) ? it.sauces.filter(Boolean) : [];
                if (sauces.length < 1 || sauces.length > 2) {
                    return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$next$40$15$2e$4$2e$6_react$2d$dom$40$19$2e$1$2e$0_react$40$19$2e$1$2e$0_$5f$react$40$19$2e$1$2e$0$2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
                        error: "Kies 1 of 2 sauzen voor pasta"
                    }, {
                        status: 400
                    });
                }
            }
        }
        // Tekstregels per item
        const lines = items.map((it)=>{
            const qty = it.qty ?? 1;
            const removed = it.removed?.length ? ` | Weglaten: ${it.removed.join(", ")}` : "";
            const note = it.note ? ` | Opmerking: ${it.note}` : "";
            const cat = String(it.category || "").toLowerCase();
            const isPasta = cat === "pasta"; // sauzen enkel voor gewone pasta
            const slot = it.timeslot ? ` | Timeslot: ${it.timeslot}` : "";
            const size = it.size ? ` | Maat: ${String(it.size).toLowerCase().replace(/^./, (c)=>c.toUpperCase())}` : "";
            const sauces = isPasta && Array.isArray(it.sauces) && it.sauces.length ? ` | Sauzen: ${it.sauces.join(" + ")}` : "";
            const bread = it.bread ? ` | Brood: ${String(it.bread).toLowerCase() === "bruin" ? "Bruin" : "Wit"}` : "";
            const cheese = it.cheese && CHEESE_SET.has(String(it.cheese).toLowerCase()) ? ` | Kaas: ${String(it.cheese).toLowerCase() === "met" ? "met" : "zonder"}` : "";
            return `â€¢ ${it.name} Ã— ${qty} â€” â‚¬ ${(it.price * qty).toFixed(2)}${slot}${size}${sauces}${cheese}${bread}${removed}${note}`;
        });
        // ðŸ‘‡ Nieuw: bedrijfsinfo in plain text
        const isCompany = !!customer.isCompany;
        const companyLine = customer.companyName ? `Bedrijf: ${customer.companyName}\n` : "";
        const companyFlag = `Zakelijk: ${isCompany ? "ja" : "nee"}\n`;
        const text = `Nieuwe bestelling via Snaque

Klant: ${customer.name}
Tel.: ${customer.phone}
${companyFlag}${companyLine}${customer.note ? `Notitie: ${customer.note}\n` : ""}Datum/tijd: ${placedAt ?? new Date().toISOString()}

Items:
${lines.join("\n")}

Totaal: â‚¬ ${Number(total).toFixed(2)}
`;
        // ðŸ‘‡ Nieuw: bedrijfsinfo in HTML
        const html = `
      <div style="font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Arial;">
        <h2>Nieuwe bestelling via Snaque</h2>
        <p>
          <strong>Klant:</strong> ${escapeHtml(customer.name)}<br/>
          <strong>Tel.:</strong> ${escapeHtml(customer.phone)}<br/>
          <strong>Zakelijk:</strong> ${isCompany ? "ja" : "nee"}<br/>
          ${customer.companyName ? `<strong>Bedrijf:</strong> ${escapeHtml(customer.companyName)}<br/>` : ""}
          ${customer.note ? `<strong>Notitie:</strong> ${escapeHtml(customer.note)}<br/>` : ""}
          <strong>Datum/tijd:</strong> ${placedAt ?? new Date().toISOString()}
        </p>
        <h3>Items</h3>
        <ul>
          ${items.map((it)=>{
            const qty = it.qty ?? 1;
            const removed = it.removed?.length ? ` | Weglaten: ${it.removed.join(", ")}` : "";
            const note = it.note ? ` | Opmerking: ${escapeHtml(it.note)}` : "";
            const cat = String(it.category || "").toLowerCase();
            const isPasta = cat === "pasta"; // sauzen enkel voor gewone pasta
            const slot = it.timeslot ? ` | Timeslot: ${it.timeslot}` : "";
            const size = it.size ? ` | Maat: ${String(it.size).toLowerCase().replace(/^./, (c)=>c.toUpperCase())}` : "";
            const sauces = isPasta && Array.isArray(it.sauces) && it.sauces.length ? ` | Sauzen: ${it.sauces.join(" + ")}` : "";
            const bread = it.bread ? ` | Brood: ${String(it.bread).toLowerCase() === "bruin" ? "Bruin" : "Wit"}` : "";
            const cheese = it.cheese && CHEESE_SET.has(String(it.cheese).toLowerCase()) ? ` | Kaas: ${String(it.cheese).toLowerCase() === "met" ? "met" : "zonder"}` : "";
            const safeName = escapeHtml(it.name);
            const safeRemoved = escapeHtml(removed);
            const safeSlot = escapeHtml(slot);
            const safeSize = escapeHtml(size);
            const safeSauces = escapeHtml(sauces);
            const safeCheese = escapeHtml(cheese);
            const safeBread = escapeHtml(bread);
            return `<li>${safeName} Ã— ${qty} â€” â‚¬ ${(it.price * qty).toFixed(2)}${safeSlot}${safeSize}${safeSauces}${safeCheese}${safeBread}${safeRemoved}${note}</li>`;
        }).join("")}
        </ul>
        <p><strong>Totaal:</strong> â‚¬ ${Number(total).toFixed(2)}</p>
      </div>
    `;
        // E-mail transport
        const transporter = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$nodemailer$40$7$2e$0$2e$5$2f$node_modules$2f$nodemailer$2f$lib$2f$nodemailer$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["default"].createTransport({
            host: SMTP_HOST,
            port: Number(SMTP_PORT),
            secure: SMTP_SECURE === "true",
            auth: SMTP_USER && SMTP_PASS ? {
                user: SMTP_USER,
                pass: SMTP_PASS
            } : undefined
        });
        await transporter.sendMail({
            from: ORDER_EMAIL_FROM || SMTP_USER,
            to: ORDER_EMAIL_TO,
            // ðŸ‘‡ Nieuw: toon bedrijfsnaam in subject indien beschikbaar
            subject: `Nieuwe bestelling â€” ${customer.name}${customer.companyName ? ` (${customer.companyName})` : ""}`,
            text,
            html
        });
        return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$next$40$15$2e$4$2e$6_react$2d$dom$40$19$2e$1$2e$0_react$40$19$2e$1$2e$0_$5f$react$40$19$2e$1$2e$0$2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
            ok: true
        });
    } catch (e) {
        console.error("Order email error", e);
        return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$next$40$15$2e$4$2e$6_react$2d$dom$40$19$2e$1$2e$0_react$40$19$2e$1$2e$0_$5f$react$40$19$2e$1$2e$0$2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
            error: "Serverfout bij verzenden"
        }, {
            status: 500
        });
    }
}
// kleine helper
function escapeHtml(s) {
    return String(s).replace(/[&<>\"']/g, (m)=>({
            "&": "&amp;",
            "<": "&lt;",
            ">": "&gt;",
            '"': "&quot;",
            "'": "&#039;"
        })[m]);
}
}),

};

//# sourceMappingURL=%5Broot-of-the-server%5D__c3f64664._.js.map